{"version":3,"sources":["services/settings.js","hooks/useUser.js","services/login.js","services/addFav.js","components/Spinner/index.js","services/getGifs.js","hooks/useGifs.js","components/SearchForm/hook.js","components/SearchForm/index.js","components/Login/index.js","context/GifsContext.js","components/Modal/index.js","components/Fav/index.js","components/Gif/index.js","components/Button/styles.js","components/Button/index.js","context/UserContext.js","services/getFavs.js","components/SearchForm/SearchForm.module.css","components/ListOfGifs/index.js","hooks/useNearScreen.js","styles/index.js","components/Header/index.js","components/Register/index.js","services/register.js","pages/Register/index.js","pages/Login/index.js","pages/SearchResults/index.js","services/getSingleGif.js","hooks/useSingleGif.js","pages/Detail/index.js","pages/ErrorPage/index.js","App.js","serviceWorker.js","index.js"],"names":["API_KEY","API_URL","useUser","useContext","Context","favs","jwt","setFavs","setJWT","useState","loading","error","state","setState","login","useCallback","username","password","fetch","method","headers","body","JSON","stringify","then","res","ok","Error","json","loginService","window","sessionStorage","setItem","catch","err","removeItem","console","addFav","id","addFavService","logout","isLogged","Boolean","isLoginLoading","hasLoginError","Spinner","className","fromApiResponseToGifs","apiResponse","data","Array","isArray","map","image","images","title","url","downsized_medium","getGifs","limit","rating","keyword","page","apiURL","useGifs","setLoading","loadingNextPage","setLoadingNextPage","setPage","GifsContext","gifs","setGifs","keywordToUse","localStorage","getItem","useEffect","nextGifs","prevGifs","concat","ACTIONS","ACTIONS_REDUCERS","action","times","payload","reducer","actionReducer","type","RATINGS","SearchForm","initialKeyword","initialRating","useLocation","pushLocation","useReducer","decodeURIComponent","dispatch","changeKeyword","changeRating","useForm","onSubmit","evt","preventDefault","css","Button","placeholder","onChange","target","value","disabled","key","Login","onLogin","setUsername","setPassword","navigate","e","React","createContext","GifsContextProvider","children","Provider","Modal","onClose","onClick","ModalPortal","ReactDOM","createPortal","document","getElementById","Fav","showModal","setShowModal","some","favId","label","emoji","aria-label","role","Gif","to","alt","src","SIZES","small","medium","large","Link","styled","LinkWouter","props","theme","colors","primary","textColor","size","warn","Object","keys","join","withComponent","ButtonComponent","href","UserContextProvider","getFavs","module","exports","ListOfGifs","useNearScreen","distance","externalRef","once","isNearScreen","setShow","fromRef","useRef","observer","element","current","entries","isIntersecting","disconnect","Promise","resolve","IntersectionObserver","rootMargin","observe","bps","greaterThanMobile","fontSizes","paddings","xs","s","m","l","Header","useRoute","match","handleClick","content","Register","handleSubmit","register","errors","registered","setRegistered","isSubmitting","setIsSubmitting","values","registerService","name","ref","required","as","RegisterPage","LoginPage","SearchResults","params","length","debounceHandleNextPage","debounce","prevPage","Helmet","decodeURI","useSingleGif","gifFromCache","find","singleGif","gif","setGif","isLoading","setIsLoading","isError","setIsError","getSingleGif","Detail","gifsErrors","pageErrorStyles","codeErrorStyles","msgErrorStyles","gifErrorStyles","margin","width","height","objectFit","ErrorPage","Math","floor","random","HomePage","lazy","App","UserContext","fallback","component","path","location","hostname","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.172ecef3.chunk.js","sourcesContent":["export const API_KEY = 'dIJrma20pSU6ymMwWnDbiaT7NFHeAGVa'\n\nexport const API_URL = 'https://api.giphy.com/v1'","import {useCallback, useContext, useState} from 'react'\nimport Context from 'context/UserContext'\nimport loginService from 'services/login'\nimport addFavService from 'services/addFav'\n\nexport default function useUser () {\n  const {favs, jwt, setFavs, setJWT} = useContext(Context)\n  const [state, setState] = useState({ loading: false, error: false })\n\n  const login = useCallback(({username, password}) => {\n    setState({loading: true, error: false })\n    loginService({username, password})\n      .then(jwt => {\n        window.sessionStorage.setItem('jwt', jwt)\n        setState({loading: false, error: false })\n        setJWT(jwt)\n      })\n      .catch(err => {\n        window.sessionStorage.removeItem('jwt')\n        setState({loading: false, error: true })\n        console.error(err)\n      })\n  }, [setJWT])\n\n  const addFav = useCallback(({id}) => {\n    addFavService({id, jwt})\n      .then(setFavs)\n      .catch(err => {\n        console.error(err)\n      })\n  }, [jwt, setFavs]) \n\n  const logout = useCallback(() => {\n    window.sessionStorage.removeItem('jwt')\n    setJWT(null)\n  }, [setJWT])\n\n  return {\n    addFav,\n    favs,\n    isLogged: Boolean(jwt),\n    isLoginLoading: state.loading,\n    hasLoginError: state.error,\n    login,\n    logout\n  }\n} ","const ENDPOINT = 'https://deno-api-users-login.herokuapp.com'\n\nexport default function login ({ username, password }) {\n  return fetch(`${ENDPOINT}/login`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({username, password})\n  }).then(res => {\n    if (!res.ok) throw new Error('Response is NOT ok')\n    return res.json()\n  }).then(res => {\n    const { jwt } = res\n    return jwt\n  })\n}","const ENDPOINT = 'https://deno-api-users-login.herokuapp.com'\n\nexport default function addFav ({ id, jwt }) {\n  return fetch(`${ENDPOINT}/favs/${id}`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({jwt})\n  }).then(res => {\n    if (!res.ok) throw new Error('Response is NOT ok')\n    return res.json()\n  }).then(res => {\n    const { favs } = res\n    return favs\n  })\n}","import React from 'react'\nimport './styles.css'\n\nexport default function Spinner () {\n  return <div className=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n}","import {API_KEY, API_URL} from './settings'\n\nconst fromApiResponseToGifs = apiResponse => {\n  const {data = []} = apiResponse\n  if (Array.isArray(data)) {\n    const gifs = data.map(image => {\n      const {images, title, id} = image\n      const { url } = images.downsized_medium\n      return { title, id, url }\n    })\n    return gifs\n  }\n  return []\n}\n\nexport default function getGifs({\n  limit = 15,\n  rating = \"g\",\n  keyword = \"morty\",\n  page = 0,\n} = {}) {\n  const apiURL = `${API_URL}/gifs/search?api_key=${API_KEY}&q=${keyword}&limit=${limit}&offset=${\n    page * limit\n  }&rating=${rating}&lang=en`\n\n  return fetch(apiURL)\n    .then((res) => res.json())\n    .then(fromApiResponseToGifs)\n}","import {useContext, useEffect, useState} from 'react'\nimport getGifs from '../services/getGifs'\nimport GifsContext from '../context/GifsContext'\n\nconst INITIAL_PAGE = 0\n\nexport function useGifs ({ keyword, rating } = { keyword: null }) {\n  const [loading, setLoading] = useState(false)\n  const [loadingNextPage, setLoadingNextPage] = useState(false)\n\n  const [page, setPage] = useState(INITIAL_PAGE)\n  const {gifs, setGifs} = useContext(GifsContext)\n\n  // recuperamos la keyword del localStorage\n  const keywordToUse = keyword || localStorage.getItem('lastKeyword') || 'random'\n\n  useEffect(function () {\n    setLoading(true)\n\n    getGifs({ keyword: keywordToUse, rating })\n      .then(gifs => {\n        setGifs(gifs)\n        setLoading(false)\n        // guardamos la keyword en el localStorage\n        localStorage.setItem('lastKeyword', keyword)\n      })\n  }, [keyword, keywordToUse, rating, setGifs])\n\n  useEffect(function () {\n    if (page === INITIAL_PAGE) return\n\n    setLoadingNextPage(true)\n\n    getGifs({ keyword: keywordToUse, page, rating })\n      .then(nextGifs => {\n        setGifs(prevGifs => prevGifs.concat(nextGifs))\n        setLoadingNextPage(false)\n      })\n  }, [keywordToUse, page, rating, setGifs])\n\n  return {loading, loadingNextPage, gifs, setPage}\n}","import { useReducer } from \"react\";\n\nconst ACTIONS = {\n  CHANGE_KEYWORD: \"change_keyword\",\n  CHANGE_RATING: \"change_rating\",\n};\n\nconst ACTIONS_REDUCERS = {\n  [ACTIONS.CHANGE_KEYWORD]: (state, action) => ({\n    ...state,\n    times: state.times + 1,\n    keyword: action.payload,\n  }),\n  [ACTIONS.CHANGE_RATING]: (state, action) => ({\n    ...state,\n    rating: action.payload,\n  }),\n};\n\nconst reducer = (state, action) => {\n  const actionReducer = ACTIONS_REDUCERS[action.type];\n  return actionReducer ? actionReducer(state, action) : state;\n};\n\nexport default function useForm({\n  initialKeyword = \"\",\n  initialRating = \"g\",\n} = {}) {\n  const [{ keyword, rating }, dispatch] = useReducer(reducer, {\n    keyword: decodeURIComponent(initialKeyword),\n    rating: initialRating\n  });\n\n  return {\n    changeKeyword: ({ keyword }) =>\n      dispatch({ type: ACTIONS.CHANGE_KEYWORD, payload: keyword }),\n    changeRating: ({ rating }) =>\n      dispatch({ type: ACTIONS.CHANGE_RATING, payload: rating }),\n    keyword,\n    rating\n  };\n}\n","import React from \"react\"\nimport { useLocation } from \"wouter\"\nimport useForm from './hook'\nimport css from \"./SearchForm.module.css\"\nimport Button from 'components/Button'\n\nconst RATINGS = [\"g\", \"pg\", \"pg-13\", \"r\"]\n\nexport default function SearchForm({\n  initialKeyword = '',\n  initialRating = RATINGS[0]\n}) {\n  const [_, pushLocation] = useLocation()\n\n  const {keyword, rating, changeKeyword, changeRating} = useForm({ initialKeyword, initialRating })\n\n  const onSubmit = ({ keyword }) => {\n    if (keyword !== '') {\n      // navegar a otra ruta\n      pushLocation(`/search/${keyword}/${rating}`)\n    }\n  }\n\n  const handleChange = (evt) => {\n    changeKeyword({ keyword: evt.target.value })\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault()\n    onSubmit({ keyword })\n  }\n\n  const handleChangeRating = (evt) => {\n    changeRating({ rating: evt.target.value })\n  }\n\n  return (\n    <>\n      <form onSubmit={handleSubmit} className={css[\"c-search\"]}>\n        <Button>Buscar</Button>\n        <input\n          className={css[\"c-search-input\"]}\n          placeholder=\"Search a gif here...\"\n          onChange={handleChange}\n          type=\"text\"\n          value={keyword}\n        />\n        <select className={css[\"c-search-list\"]} value={rating} onChange={handleChangeRating}>\n          <option disabled>\n            Rating:\n          </option>\n          {RATINGS.map((rating) => (\n            <option key={rating}>{rating}</option>\n          ))}\n        </select>\n      </form>\n    </>\n  )\n}\n","import React, { useState } from \"react\";\nimport {useLocation} from \"wouter\"\nimport useUser from 'hooks/useUser'\nimport { useEffect } from \"react\";\nimport './Login.css'\n\nexport default function Login({onLogin}) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [, navigate] = useLocation()\n  const {isLoginLoading, hasLoginError, login, isLogged} = useUser()\n\n  useEffect(() => {\n    if (isLogged) {\n      navigate('/')\n      onLogin && onLogin()\n    }\n  }, [isLogged, navigate, onLogin])\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    login({ username, password })\n  };\n\n  return (\n    <>\n      {isLoginLoading && <strong>Checking credentials...</strong>}\n      {!isLoginLoading &&\n        <form className='form' onSubmit={handleSubmit}>\n          <label>\n            username\n            <input\n            placeholder=\"username\"\n            onChange={(e) => setUsername(e.target.value)}\n            value={username}\n          />\n          </label>\n\n          <label>\n            password\n            <input\n              type=\"password\"\n              placeholder=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n            />\n          </label>\n\n          <button className='btn'>Login</button>\n        </form>\n      }\n      {\n        hasLoginError && <strong>Credentials are invalid</strong>\n      }\n    </>\n  );\n}\n","import React, {useState} from 'react'\n\nconst Context = React.createContext({})\n\nexport function GifsContextProvider ({children}) {\n  const [gifs, setGifs] = useState([])\n\n  return <Context.Provider value={{gifs, setGifs}}>\n    {children}\n  </Context.Provider>\n}\n\nexport default Context","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './Modal.css'\n\nfunction Modal ({ children, onClose }) {\n  return <div className='modal'>\n    <div className='modal-content'>\n      <button className='btn' onClick={onClose}>üÖß</button>\n      {children}\n    </div>\n  </div>\n}\n\nexport default function ModalPortal ({ children, onClose }) {\n  return ReactDOM.createPortal(\n    <Modal onClose={onClose}>\n      {children}\n    </Modal>,\n    document.getElementById('root')\n  )\n}","import React, { useState } from \"react\";\nimport useUser from \"hooks/useUser\";\nimport Modal from \"components/Modal\";\nimport Login from \"components/Login\";\nimport { useLocation } from \"wouter\";\n\nimport \"./Fav.css\";\n\nexport default function Fav({ id }) {\n  const { isLogged, addFav, favs } = useUser();\n  const [, navigate] = useLocation();\n  const [showModal, setShowModal] = useState(false);\n\n  const isFaved = favs.some((favId) => favId === id);\n\n  const handleClick = () => {\n    if (!isLogged) return setShowModal(true);\n    addFav({ id });\n  };\n\n  const handleClose = () => {\n    setShowModal(false);\n  };\n\n  const handleLogin = () => {\n    setShowModal(false);\n  };\n\n  const [label, emoji] = isFaved\n    ? [\"Remove Gif from favorites\", \"‚ùå\"]\n    : [\"Add Gif to favorites\", \"‚ù§Ô∏è\"];\n\n  return (\n    <>\n      <button className=\"gf-Fav\" onClick={handleClick}>\n        <span aria-label={label} role=\"img\">\n          {emoji}\n        </span>\n      </button>\n      {showModal && (\n        <Modal onClose={handleClose}>\n          <Login onLogin={handleLogin} />\n        </Modal>\n      )}\n    </>\n  );\n}\n","import React from 'react'\nimport {Link} from 'wouter'\nimport Fav from 'components/Fav'\nimport './Gif.css'\n\nexport default function Gif ({ title, id, url }) {\n  return (\n    <div className=\"Gif\">\n      <div className=\"Gif-buttons\">\n        <Fav id={id}></Fav>\n      </div>\n      <Link to={`/gif/${id}`} className='Gif-link'>\n        <h4>{title}</h4>\n        <img loading='lazy' alt={title} src={url} />\n      </Link>\n    </div>\n\n  )\n}","import { Link as LinkWouter } from \"wouter\";\nimport styled from '@emotion/styled'\n\nconst SIZES = {\n  small: '1rem',\n  medium: '2rem',\n  large: '3rem'\n}\n\nconst getFontSize = props => {\n  const size = SIZES[props.size]\n  if (!size) {\n    console.warn(`[Button Styled Component] This size is not correct. Use ${Object.keys(SIZES).join(', ')}`)\n    return SIZES.small\n  }\n  return size\n}\n\nexport const Link = styled(LinkWouter)`\n  background-color: ${props => props.theme.colors.primary};\n  border: 1px solid transparent;\n  color: ${({theme}) => theme.colors.textColor};\n  cursor: pointer;\n  font-size: ${getFontSize};\n  padding: .5rem 1rem;\n\n  :hover {\n    background-color: var(--brand-color_2);\n  }\n\n  [disabled] {\n    opacity: .3;\n    pointer-events: none;\n  }\n`\n\nexport const Button = Link.withComponent('button')","import React from 'react'\nimport { Button, Link } from './styles'\n\nexport default function ButtonComponent ({children, href, size = 'jkhdfgsjkfghsdsjkldfgdljk'}) {\n  return href\n    ? <Link size={size} href={href}>{children}</Link>\n    : <Button size={size}>{children}</Button>\n}","import React, {useState} from 'react'\nimport { useEffect } from 'react'\nimport getFavs from 'services/getFavs'\n\nconst Context = React.createContext({})\n\nexport function UserContextProvider ({children}) {\n  const [favs, setFavs] = useState([])\n  const [jwt, setJWT] = useState(\n    () => window.sessionStorage.getItem('jwt')\n  )\n\n  useEffect(() => {\n    if (!jwt) return setFavs([])\n    getFavs({jwt}).then(setFavs)\n  }, [jwt])\n\n  return <Context.Provider value={{\n    favs,\n    jwt,\n    setFavs,\n    setJWT\n  }}>\n    {children}\n  </Context.Provider>\n}\n\nexport default Context","const ENDPOINT = 'https://deno-api-users-login.herokuapp.com'\n\nexport default function getFavs ({ jwt }) {\n  return fetch(`${ENDPOINT}/favs`, {\n    method: 'GET',\n    headers: {\n      \"Authorization\": jwt,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    if (!res.ok) throw new Error('Response is NOT ok')\n    return res.json()\n  }).then(res => {\n    const { favs } = res\n    return favs\n  })\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"c-search\":\"SearchForm_c-search__1VtYh\",\"c-search-list\":\"SearchForm_c-search-list__iLRzj\",\"c-search-input\":\"SearchForm_c-search-input__lcLdS\"};","import React from 'react'\nimport Gif from '../Gif'\nimport './ListOfGifs.css'\n\nexport default function ListOfGifs ({gifs}) {\n  return <div className='ListOfGifs'>\n    {\n      gifs.map(({id, title, url}) =>\n        <Gif\n          id={id}\n          key={id}\n          title={title}\n          url={url}\n        />\n      )\n    }\n  </div>\n}","import {useEffect, useState, useRef} from 'react'\n\nexport default function useNearScreen ({ distance = '100px', externalRef, once = true } = {}) {\n  const [isNearScreen, setShow] = useState(false)\n  const fromRef = useRef()\n\n  useEffect(() => {\n    let observer\n\n    const element = externalRef ? externalRef.current : fromRef.current\n\n    const onChange = (entries, observer) => {\n      const el = entries[0]\n      if (el.isIntersecting) {\n        setShow(true)\n        once && observer.disconnect()\n      } else {\n        !once && setShow(false)\n      }\n    }\n\n    Promise.resolve(\n      typeof IntersectionObserver !== 'undefined'\n        ? IntersectionObserver\n        : import('intersection-observer')\n    ).then(() => {\n      observer = new IntersectionObserver(onChange, {\n        rootMargin: distance\n      })\n  \n      if (element) observer.observe(element)\n    })\n\n    return () => observer && observer.disconnect()\n  })\n\n  return {isNearScreen, fromRef}\n}","export const bps = {\n  greaterThanMobile: '@media screen and (min-width: 55rem)'\n}\n\nexport const theme = {\n  colors: {\n    textColor: 'var(--theme-body-txt)',\n    primary: 'var(--brand-color_3)'\n  },\n  fontSizes: {\n\n  },\n  paddings: {\n    xs: '4px',\n    s: '8px',\n    m: '16px',\n    l: '32px'\n  }\n}","import React from 'react'\nimport {useRoute, Link} from 'wouter'\n\nimport useUser from 'hooks/useUser'\n\nimport './Header.css'\n\nexport default function Header () {\n  const {isLogged, logout} = useUser()\n  const [match] = useRoute(\"/login\");\n\n  const handleClick = e => {\n    e.preventDefault()\n    logout()\n  }\n\n  const renderLoginButtons = ({isLogged}) => {\n    return isLogged\n      ? <Link to='#' onClick={handleClick}>\n      Logout\n      </Link>\n      : <>\n        <Link to='/login'>\n          Login\n        </Link>\n        <Link to='/register'>\n          Register\n        </Link>\n        </>\n  }\n\n  const content = match\n    ? null\n    : renderLoginButtons({isLogged})\n\n  return (\n    <header className='gf-header'>\n      {content}\n    </header>\n  )\n}","import React, {useState} from \"react\";\nimport registerService from \"services/register\";\nimport { useForm, ErrorMessage } from 'react-hook-form'\n\nexport default function Register() {\n  const {handleSubmit, register, errors} = useForm()\n\n  const [registered, setRegistered] = useState(false)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const onSubmit = values => {\n    setIsSubmitting(true)\n    registerService(values)\n      .then(() => {\n        setRegistered(true)\n        setIsSubmitting(false)\n      })\n  }\n\n  if (registered) {\n    return <h4>\n      Congratulations ‚úÖ! You've been successfully registered!\n    </h4>\n  }\n\n  return (\n    <>\n      <form className='form' onSubmit={handleSubmit(onSubmit)}>\n        <input\n          className={errors.username ? 'error' : ''}\n          name=\"username\"\n          placeholder=\"Put here the username\"\n          ref={register({ required: 'This is required' })}\n        />\n        <ErrorMessage errors={errors} name='username' as=\"small\"/>\n\n        <input\n          className={errors.password ? 'error' : ''}\n          name=\"password\"\n          placeholder=\"Put here the password\"\n          ref={register({ required: 'This is required' })}\n          type='password'\n        />\n        <ErrorMessage errors={errors} name='password' as=\"small\" />\n\n        <button className=\"btn\" disabled={isSubmitting}>\n          Registrarse\n        </button>\n      </form>\n    </>\n  );\n}","const ENDPOINT = 'https://deno-api-users-login.herokuapp.com'\n\nexport default function register ({ username, password }) {\n  return fetch(`${ENDPOINT}/register`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({username, password})\n  }).then(res => {\n    if (!res.ok) throw new Error('Response is NOT ok')\n    return true\n  })\n}","import React from 'react'\nimport Register from 'components/Register'\n\nexport default function RegisterPage () {\n  return <>\n    <h2>Register</h2>\n    <Register />\n  </>\n}","import React from 'react'\nimport Login from 'components/Login'\n\nexport default function LoginPage () {\n  return <>\n    <h2>Login</h2>\n    <Login />\n  </>\n}","import React, {useCallback, useRef, useEffect} from 'react'\nimport Spinner from 'components/Spinner'\nimport ListOfGifs from 'components/ListOfGifs'\nimport SearchForm from 'components/SearchForm'\n\nimport {useGifs} from 'hooks/useGifs'\nimport useNearScreen from 'hooks/useNearScreen'\n\nimport debounce from 'just-debounce-it'\nimport {Helmet} from 'react-helmet'\n\nexport default function SearchResults ({ params }) {\n  const { keyword, rating } = params\n  const { loading, gifs, setPage } = useGifs({ keyword, rating })\n  \n  const externalRef = useRef()\n  const {isNearScreen} = useNearScreen({\n    externalRef: loading ? null : externalRef,\n    once: false\n  })\n\n  const title = gifs ? `${gifs.length} resultados de ${keyword}` : ''\n\n  const debounceHandleNextPage = useCallback(debounce(\n    () => setPage(prevPage => prevPage + 1), 200\n  ), [setPage])\n\n  useEffect(function () {\n    if (isNearScreen) debounceHandleNextPage()\n  }, [debounceHandleNextPage, isNearScreen])\n\n  return <>\n    {loading\n      ? <Spinner />\n      : <>\n        <Helmet>\n          <title>{title}</title>\n          <meta name=\"description\" content={title} />\n          <meta name=\"rating\" content=\"General\" />\n        </Helmet>\n        <header className=\"o-header\">\n          <SearchForm initialKeyword={keyword} initialRating={rating} />\n        </header>\n        <div className=\"App-wrapper\">\n          <h3 className=\"App-title\">\n            {decodeURI(keyword)}\n          </h3>\n          <ListOfGifs gifs={gifs} />\n          <div id=\"visor\" ref={externalRef}></div>\n        </div>\n      </>\n    }\n  </>\n}","import {API_KEY, API_URL} from './settings'\n\nconst fromApiResponseToGifs = apiResponse => {\n  const {data} = apiResponse\n  const {images, title, id} = data\n  const { url } = images.downsized_medium\n  return { title, id, url }\n}\n\nexport default function getSingleGif ({ id }) {\n  return fetch(`${API_URL}/gifs/${id}?api_key=${API_KEY}`)\n    .then(res => res.json())\n    .then(fromApiResponseToGifs)\n}","import {useState, useEffect} from 'react'\nimport {useGifs} from 'hooks/useGifs'\nimport getSingleGif from 'services/getSingleGif'\n\nexport default function useSingleGif ({ id }) {\n  const {gifs} = useGifs()\n  const gifFromCache = gifs.find(singleGif => singleGif.id === id)\n\n  const [gif, setGif] = useState(gifFromCache)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isError, setIsError] = useState(false)\n\n  useEffect(function () {\n    if (!gif) {\n      setIsLoading(true)\n      // llamar al servicio si no tenemos gif\n      getSingleGif({ id })\n        .then(gif => {\n          setGif(gif)\n          setIsLoading(false)\n          setIsError(false)\n        }).catch(err => {\n          setIsLoading(false)\n          setIsError(true)\n        })\n    }\n  }, [gif, id])\n\n  return {gif, isLoading, isError}\n}","import React from 'react'\nimport {Redirect} from 'wouter'\nimport Gif from 'components/Gif'\nimport useSingleGif from 'hooks/useSingleGif'\nimport Spinner from 'components/Spinner'\nimport {Helmet} from 'react-helmet'\n\nexport default function Detail ({ params }) {\n  const {gif, isLoading, isError} = useSingleGif({id: params.id})\n  const title = gif ? gif.title : ''\n\n  if (isLoading) {\n    return (\n      <>\n        <Helmet>\n          <title>Cargando...</title>\n        </Helmet>\n        <Spinner />\n      </>\n    )\n  }\n\n  if (isError) return <Redirect to='/404' />\n  if (!gif) return null\n\n  return <>\n      <Helmet>\n        <title>{title} || Giffy</title>\n      </Helmet>\n      <h3 className=\"App-title\">{gif.title}</h3>\n      <Gif {...gif} />\n    </>\n}","/** @jsx jsx */\n/** @jsxFrag React.Fragment */\n\nimport React from \"react\";\nimport SearchForm from \"components/SearchForm\";\nimport { Helmet } from \"react-helmet\";\nimport Button from 'components/Button'\nimport { css, jsx } from '@emotion/core'\n\nconst gifsErrors = ['d2jjuAZzDSVLZ5kI', 'Bp3dFfoqpCKFyXuSzP', 'hv5AEBpH3ZyNoRnABG', 'hLwSzlKN8Fi6I'];\n\nconst pageErrorStyles = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem;\n  text-align: center;\n`\n\nconst codeErrorStyles = css`\n  font-size: 5rem;\n  font-weight: bold;\n  font-style: italic;\n`\n\nconst msgErrorStyles = css`\n  font-size: 1.5rem;\n  margin: 1rem auto;\n`\n\nconst SIZE = '350px'\n\nconst gifErrorStyles = css({\n  margin: \"1rem auto\",\n  width: SIZE,\n  height: SIZE,\n  objectFit: 'cover'\n})\n\nexport default function ErrorPage() {\n  const randomImage = () => {\n    return `https://media.giphy.com/media/${gifsErrors[Math.floor(Math.random() * gifsErrors.length) + 1 ]}/giphy.gif`\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Error 404 | Giffy</title>\n      </Helmet>\n      <header className=\"o-header\">\n        <SearchForm />\n      </header>\n      <div className=\"App-wrapper\">\n        <div css={pageErrorStyles}>\n            <span css={codeErrorStyles}>404</span>\n            <span css={msgErrorStyles}>Sometimes gettings lost isn't that bad</span>\n            <img css={gifErrorStyles} src={randomImage()} alt=\"alt-page-404\"/>\n            <Button href='/'>Go back home</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React, { Suspense } from \"react\";\nimport { Link, Route, Switch } from \"wouter\";\n\nimport Header from \"components/Header\";\n\nimport Register from 'pages/Register'\nimport Login from \"pages/Login\";\nimport SearchResults from \"pages/SearchResults\";\nimport Detail from \"pages/Detail\";\nimport ErrorPage from \"pages/ErrorPage\";\n\nimport { UserContextProvider } from \"context/UserContext\";\nimport { GifsContextProvider } from \"context/GifsContext\";\n\nimport \"./App.css\";\n\nconst HomePage = React.lazy(() => import(\"./pages/Home\"));\n\nexport default function App() {\n  return (\n    <UserContextProvider>\n      <div className=\"App\">\n        <Suspense fallback={null}>\n          <section className=\"App-content\">\n            <Header />\n            <Link to=\"/\">\n              <figure className=\"App-logo\">\n                <img alt=\"Giffy logo\" src=\"/logo.png\" />\n              </figure>\n            </Link>\n            <GifsContextProvider>\n              <Switch>\n                <Route component={HomePage} path=\"/\" />\n                <Route\n                  component={SearchResults}\n                  path=\"/search/:keyword/:rating?\"\n                />\n                <Route component={Detail} path=\"/gif/:id\" />\n                <Route component={Login} path=\"/login\" />\n                <Route component={Register} path=\"/register\" />\n                <Route component={ErrorPage} path=\"/:rest*\" />\n              </Switch>\n            </GifsContextProvider>\n          </section>\n        </Suspense>\n      </div>\n    </UserContextProvider>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { ThemeProvider } from 'emotion-theming'\nimport { theme } from 'styles'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}