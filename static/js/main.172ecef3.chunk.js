(this.webpackJsonpgiffy=this.webpackJsonpgiffy||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="dIJrma20pSU6ymMwWnDbiaT7NFHeAGVa",r="https://api.giphy.com/v1"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),r=n(0),c=n(29);function o(){var e=Object(r.useContext)(c.b),t=e.favs,n=e.jwt,o=e.setFavs,i=e.setJWT,l=Object(r.useState)({loading:!1,error:!1}),u=Object(a.a)(l,2),s=u[0],m=u[1],d=Object(r.useCallback)((function(e){var t=e.username,n=e.password;m({loading:!0,error:!1}),function(e){var t=e.username,n=e.password;return fetch("".concat("https://deno-api-users-login.herokuapp.com","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){if(!e.ok)throw new Error("Response is NOT ok");return e.json()})).then((function(e){return e.jwt}))}({username:t,password:n}).then((function(e){window.sessionStorage.setItem("jwt",e),m({loading:!1,error:!1}),i(e)})).catch((function(e){window.sessionStorage.removeItem("jwt"),m({loading:!1,error:!0}),console.error(e)}))}),[i]),f=Object(r.useCallback)((function(e){(function(e){var t=e.id,n=e.jwt;return fetch("".concat("https://deno-api-users-login.herokuapp.com","/favs/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt:n})}).then((function(e){if(!e.ok)throw new Error("Response is NOT ok");return e.json()})).then((function(e){return e.favs}))})({id:e.id,jwt:n}).then(o).catch((function(e){console.error(e)}))}),[n,o]),g=Object(r.useCallback)((function(){window.sessionStorage.removeItem("jwt"),i(null)}),[i]);return{addFav:f,favs:t,isLogged:Boolean(n),isLoginLoading:s.loading,hasLoginError:s.error,login:d,logout:g}}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a);n(52);function c(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),r=n(0),c=n(13),o=function(e){var t=e.data,n=void 0===t?[]:t;return Array.isArray(n)?n.map((function(e){var t=e.images;return{title:e.title,id:e.id,url:t.downsized_medium.url}})):[]};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,n=void 0===t?15:t,a=e.rating,r=void 0===a?"g":a,i=e.keyword,l=void 0===i?"morty":i,u=e.page,s=void 0===u?0:u,m="".concat(c.b,"/gifs/search?api_key=").concat(c.a,"&q=").concat(l,"&limit=").concat(n,"&offset=").concat(s*n,"&rating=").concat(r,"&lang=en");return fetch(m).then((function(e){return e.json()})).then(o)}var l=n(26);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:null},t=e.keyword,n=e.rating,c=Object(r.useState)(!1),o=Object(a.a)(c,2),u=o[0],s=o[1],m=Object(r.useState)(!1),d=Object(a.a)(m,2),f=d[0],g=d[1],h=Object(r.useState)(0),p=Object(a.a)(h,2),b=p[0],v=p[1],j=Object(r.useContext)(l.b),E=j.gifs,O=j.setGifs,w=t||localStorage.getItem("lastKeyword")||"random";return Object(r.useEffect)((function(){s(!0),i({keyword:w,rating:n}).then((function(e){O(e),s(!1),localStorage.setItem("lastKeyword",t)}))}),[t,w,n,O]),Object(r.useEffect)((function(){0!==b&&(g(!0),i({keyword:w,page:b,rating:n}).then((function(e){O((function(t){return t.concat(e)})),g(!1)})))}),[w,b,n,O]),{loading:u,loadingNextPage:f,gifs:E,setPage:v}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a,r=n(1),c=n(0),o=n.n(c),i=n(2),l=n(5),u=n(16),s="change_keyword",m="change_rating",d=(a={},Object(l.a)(a,s,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{times:e.times+1,keyword:t.payload})})),Object(l.a)(a,m,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{rating:t.payload})})),a),f=function(e,t){var n=d[t.type];return n?n(e,t):e};var g=n(30),h=n.n(g),p=n(28),b=["g","pg","pg-13","r"];function v(e){var t=e.initialKeyword,n=void 0===t?"":t,a=e.initialRating,l=void 0===a?b[0]:a,u=Object(i.e)(),d=Object(r.a)(u,2),g=(d[0],d[1]),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialKeyword,n=void 0===t?"":t,a=e.initialRating,o=void 0===a?"g":a,i=Object(c.useReducer)(f,{keyword:decodeURIComponent(n),rating:o}),l=Object(r.a)(i,2),u=l[0],d=u.keyword,g=u.rating,h=l[1];return{changeKeyword:function(e){var t=e.keyword;return h({type:s,payload:t})},changeRating:function(e){var t=e.rating;return h({type:m,payload:t})},keyword:d,rating:g}}({initialKeyword:n,initialRating:l}),j=v.keyword,E=v.rating,O=v.changeKeyword,w=v.changeRating;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=e.keyword;""!==t&&g("/search/".concat(t,"/").concat(E))}({keyword:j})},className:h.a["c-search"]},o.a.createElement(p.a,null,"Buscar"),o.a.createElement("input",{className:h.a["c-search-input"],placeholder:"Search a gif here...",onChange:function(e){O({keyword:e.target.value})},type:"text",value:j}),o.a.createElement("select",{className:h.a["c-search-list"],value:E,onChange:function(e){w({rating:e.target.value})}},o.a.createElement("option",{disabled:!0},"Rating:"),b.map((function(e){return o.a.createElement("option",{key:e},e)})))))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),r=n(0),c=n.n(r),o=n(2),i=n(14);n(51);function l(e){var t=e.onLogin,n=Object(r.useState)(""),l=Object(a.a)(n,2),u=l[0],s=l[1],m=Object(r.useState)(""),d=Object(a.a)(m,2),f=d[0],g=d[1],h=Object(o.e)(),p=Object(a.a)(h,2)[1],b=Object(i.a)(),v=b.isLoginLoading,j=b.hasLoginError,E=b.login,O=b.isLogged;Object(r.useEffect)((function(){O&&(p("/"),t&&t())}),[O,p,t]);return c.a.createElement(c.a.Fragment,null,v&&c.a.createElement("strong",null,"Checking credentials..."),!v&&c.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),E({username:u,password:f})}},c.a.createElement("label",null,"username",c.a.createElement("input",{placeholder:"username",onChange:function(e){return s(e.target.value)},value:u})),c.a.createElement("label",null,"password",c.a.createElement("input",{type:"password",placeholder:"password",onChange:function(e){return g(e.target.value)},value:f})),c.a.createElement("button",{className:"btn"},"Login")),j&&c.a.createElement("strong",null,"Credentials are invalid"))}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),r=n(0),c=n.n(r),o=c.a.createContext({});function i(e){var t=e.children,n=Object(r.useState)([]),i=Object(a.a)(n,2),l=i[0],u=i[1];return c.a.createElement(o.Provider,{value:{gifs:l,setGifs:u}},t)}t.b=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n.n(a),c=n(2),o=n(1),i=n(14),l=n(21),u=n.n(l);n(53);function s(e){var t=e.children,n=e.onClose;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("button",{className:"btn",onClick:n},"\ud83c\udd67"),t))}function m(e){var t=e.children,n=e.onClose;return u.a.createPortal(r.a.createElement(s,{onClose:n},t),document.getElementById("root"))}var d=n(22);n(54);function f(e){var t=e.id,n=Object(i.a)(),l=n.isLogged,u=n.addFav,s=n.favs,f=Object(c.e)(),g=(Object(o.a)(f,2)[1],Object(a.useState)(!1)),h=Object(o.a)(g,2),p=h[0],b=h[1],v=s.some((function(e){return e===t}))?["Remove Gif from favorites","\u274c"]:["Add Gif to favorites","\u2764\ufe0f"],j=Object(o.a)(v,2),E=j[0],O=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"gf-Fav",onClick:function(){if(!l)return b(!0);u({id:t})}},r.a.createElement("span",{"aria-label":E,role:"img"},O)),p&&r.a.createElement(m,{onClose:function(){b(!1)}},r.a.createElement(d.a,{onLogin:function(){b(!1)}})))}n(55);function g(e){var t=e.title,n=e.id,a=e.url;return r.a.createElement("div",{className:"Gif"},r.a.createElement("div",{className:"Gif-buttons"},r.a.createElement(f,{id:n})),r.a.createElement(c.a,{to:"/gif/".concat(n),className:"Gif-link"},r.a.createElement("h4",null,t),r.a.createElement("img",{loading:"lazy",alt:t,src:a})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),c=n(12),o=n(2),i=n(35);function l(){var e=Object(c.a)(["\n  background-color: ",";\n  border: 1px solid transparent;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n  padding: .5rem 1rem;\n\n  :hover {\n    background-color: var(--brand-color_2);\n  }\n\n  [disabled] {\n    opacity: .3;\n    pointer-events: none;\n  }\n"]);return l=function(){return e},e}var u={small:"1rem",medium:"2rem",large:"3rem"},s=Object(i.a)(o.a)(l(),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.textColor}),(function(e){var t=u[e.size];return t||(console.warn("[Button Styled Component] This size is not correct. Use ".concat(Object.keys(u).join(", "))),u.small)})),m=s.withComponent("button");function d(e){var t=e.children,n=e.href,a=e.size,c=void 0===a?"jkhdfgsjkfghsdsjkldfgdljk":a;return n?r.a.createElement(s,{size:c,href:n},t):r.a.createElement(m,{size:c},t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),r=n(0),c=n.n(r);var o=c.a.createContext({});function i(e){var t=e.children,n=Object(r.useState)([]),i=Object(a.a)(n,2),l=i[0],u=i[1],s=Object(r.useState)((function(){return window.sessionStorage.getItem("jwt")})),m=Object(a.a)(s,2),d=m[0],f=m[1];return Object(r.useEffect)((function(){if(!d)return u([]);(function(e){var t=e.jwt;return fetch("".concat("https://deno-api-users-login.herokuapp.com","/favs"),{method:"GET",headers:{Authorization:t,"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Response is NOT ok");return e.json()})).then((function(e){return e.favs}))})({jwt:d}).then(u)}),[d]),c.a.createElement(o.Provider,{value:{favs:l,jwt:d,setFavs:u,setJWT:f}},t)}t.b=o},function(e,t,n){e.exports={"c-search":"SearchForm_c-search__1VtYh","c-search-list":"SearchForm_c-search-list__iLRzj","c-search-input":"SearchForm_c-search-input__lcLdS"}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=n(27);n(56);function o(e){var t=e.gifs;return r.a.createElement("div",{className:"ListOfGifs"},t.map((function(e){var t=e.id,n=e.title,a=e.url;return r.a.createElement(c.a,{id:t,key:t,title:n,url:a})})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),r=n(0);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,c=void 0===t?"100px":t,o=e.externalRef,i=e.once,l=void 0===i||i,u=Object(r.useState)(!1),s=Object(a.a)(u,2),m=s[0],d=s[1],f=Object(r.useRef)();return Object(r.useEffect)((function(){var e,t=o?o.current:f.current,a=function(e,t){e[0].isIntersecting?(d(!0),l&&t.disconnect()):!l&&d(!1)};return Promise.resolve("undefined"!==typeof IntersectionObserver?IntersectionObserver:n.e(5).then(n.t.bind(null,64,7))).then((function(){e=new IntersectionObserver(a,{rootMargin:c}),t&&e.observe(t)})),function(){return e&&e.disconnect()}})),{isNearScreen:m,fromRef:f}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a={greaterThanMobile:"@media screen and (min-width: 55rem)"},r={colors:{textColor:"var(--theme-body-txt)",primary:"var(--brand-color_3)"},fontSizes:{},paddings:{xs:"4px",s:"8px",m:"16px",l:"32px"}}},,,,,,,,,function(e,t,n){e.exports=n(63)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),i=(n(48),n(2)),l=n(1),u=n(14);n(49);function s(){var e=Object(u.a)(),t=e.isLogged,n=e.logout,a=Object(i.f)("/login"),c=Object(l.a)(a,1)[0],o=function(e){e.preventDefault(),n()},s=c?null:{isLogged:t}.isLogged?r.a.createElement(i.a,{to:"#",onClick:o},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{to:"/login"},"Login"),r.a.createElement(i.a,{to:"/register"},"Register"));return r.a.createElement("header",{className:"gf-header"},s)}var m=n(31);function d(){var e=Object(m.b)(),t=e.handleSubmit,n=e.register,c=e.errors,o=Object(a.useState)(!1),i=Object(l.a)(o,2),u=i[0],s=i[1],d=Object(a.useState)(!1),f=Object(l.a)(d,2),g=f[0],h=f[1];return u?r.a.createElement("h4",null,"Congratulations \u2705! You've been successfully registered!"):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form",onSubmit:t((function(e){h(!0),function(e){var t=e.username,n=e.password;return fetch("".concat("https://deno-api-users-login.herokuapp.com","/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){if(!e.ok)throw new Error("Response is NOT ok");return!0}))}(e).then((function(){s(!0),h(!1)}))}))},r.a.createElement("input",{className:c.username?"error":"",name:"username",placeholder:"Put here the username",ref:n({required:"This is required"})}),r.a.createElement(m.a,{errors:c,name:"username",as:"small"}),r.a.createElement("input",{className:c.password?"error":"",name:"password",placeholder:"Put here the password",ref:n({required:"This is required"}),type:"password"}),r.a.createElement(m.a,{errors:c,name:"password",as:"small"}),r.a.createElement("button",{className:"btn",disabled:g},"Registrarse")))}function f(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Register"),r.a.createElement(d,null))}var g=n(22);function h(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Login"),r.a.createElement(g.a,null))}var p=n(18),b=n(32),v=n(20),j=n(19),E=n(33),O=n(37),w=n.n(O),y=n(10);function k(e){var t=e.params,n=t.keyword,c=t.rating,o=Object(j.a)({keyword:n,rating:c}),i=o.loading,l=o.gifs,u=o.setPage,s=Object(a.useRef)(),m=Object(E.a)({externalRef:i?null:s,once:!1}).isNearScreen,d=l?"".concat(l.length," resultados de ").concat(n):"",f=Object(a.useCallback)(w()((function(){return u((function(e){return e+1}))}),200),[u]);return Object(a.useEffect)((function(){m&&f()}),[f,m]),r.a.createElement(r.a.Fragment,null,i?r.a.createElement(p.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,d),r.a.createElement("meta",{name:"description",content:d}),r.a.createElement("meta",{name:"rating",content:"General"})),r.a.createElement("header",{className:"o-header"},r.a.createElement(v.a,{initialKeyword:n,initialRating:c})),r.a.createElement("div",{className:"App-wrapper"},r.a.createElement("h3",{className:"App-title"},decodeURI(n)),r.a.createElement(b.a,{gifs:l}),r.a.createElement("div",{id:"visor",ref:s}))))}var S=n(27),N=n(13),C=function(e){var t=e.data,n=t.images;return{title:t.title,id:t.id,url:n.downsized_medium.url}};function x(e){var t=e.id,n=Object(j.a)().gifs.find((function(e){return e.id===t})),r=Object(a.useState)(n),c=Object(l.a)(r,2),o=c[0],i=c[1],u=Object(a.useState)(!1),s=Object(l.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)(!1),g=Object(l.a)(f,2),h=g[0],p=g[1];return Object(a.useEffect)((function(){o||(d(!0),function(e){var t=e.id;return fetch("".concat(N.b,"/gifs/").concat(t,"?api_key=").concat(N.a)).then((function(e){return e.json()})).then(C)}({id:t}).then((function(e){i(e),d(!1),p(!1)})).catch((function(e){d(!1),p(!0)})))}),[o,t]),{gif:o,isLoading:m,isError:h}}function F(e){var t=x({id:e.params.id}),n=t.gif,a=t.isLoading,c=t.isError,o=n?n.title:"";return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,"Cargando...")),r.a.createElement(p.a,null)):c?r.a.createElement(i.b,{to:"/404"}):n?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,o," || Giffy")),r.a.createElement("h3",{className:"App-title"},n.title),r.a.createElement(S.a,n)):null}var L=n(12),R=n(28),T=n(4);function z(){var e=Object(L.a)(["\n  font-size: 1.5rem;\n  margin: 1rem auto;\n"]);return z=function(){return e},e}function I(){var e=Object(L.a)(["\n  font-size: 5rem;\n  font-weight: bold;\n  font-style: italic;\n"]);return I=function(){return e},e}function _(){var e=Object(L.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem;\n  text-align: center;\n"]);return _=function(){return e},e}var G=["d2jjuAZzDSVLZ5kI","Bp3dFfoqpCKFyXuSzP","hv5AEBpH3ZyNoRnABG","hLwSzlKN8Fi6I"],A=Object(T.b)(_()),P=Object(T.b)(I()),K=Object(T.b)(z()),B=Object(T.b)({margin:"1rem auto",width:"350px",height:"350px",objectFit:"cover"});function J(){return Object(T.c)(r.a.Fragment,null,Object(T.c)(y.a,null,Object(T.c)("title",null,"Error 404 | Giffy")),Object(T.c)("header",{className:"o-header"},Object(T.c)(v.a,null)),Object(T.c)("div",{className:"App-wrapper"},Object(T.c)("div",{css:A},Object(T.c)("span",{css:P},"404"),Object(T.c)("span",{css:K},"Sometimes gettings lost isn't that bad"),Object(T.c)("img",{css:B,src:"https://media.giphy.com/media/".concat(G[Math.floor(Math.random()*G.length)+1],"/giphy.gif"),alt:"alt-page-404"}),Object(T.c)(R.a,{href:"/"},"Go back home"))))}var q=n(29),M=n(26),D=(n(60),r.a.lazy((function(){return n.e(4).then(n.bind(null,67))})));function W(){return r.a.createElement(q.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(a.Suspense,{fallback:null},r.a.createElement("section",{className:"App-content"},r.a.createElement(s,null),r.a.createElement(i.a,{to:"/"},r.a.createElement("figure",{className:"App-logo"},r.a.createElement("img",{alt:"Giffy logo",src:"/logo.png"}))),r.a.createElement(M.a,null,r.a.createElement(i.d,null,r.a.createElement(i.c,{component:D,path:"/"}),r.a.createElement(i.c,{component:k,path:"/search/:keyword/:rating?"}),r.a.createElement(i.c,{component:F,path:"/gif/:id"}),r.a.createElement(i.c,{component:h,path:"/login"}),r.a.createElement(i.c,{component:f,path:"/register"}),r.a.createElement(i.c,{component:J,path:"/:rest*"})))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(40),V=n(34);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U.a,{theme:V.b},r.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[43,1,2]]]);
//# sourceMappingURL=main.172ecef3.chunk.js.map